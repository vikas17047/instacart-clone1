<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Studio - Instacart</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --shopify-green: #008060; --bg: #f4f6f8; }
        body { background: var(--bg); font-family: sans-serif; margin: 0; padding-bottom: 80px; }
        .header { background: white; padding: 15px; display: flex; justify-content: space-between; position: sticky; top:0; z-index:100; border-bottom: 1px solid #ddd; }
        .panel { background: white; margin: 15px; padding: 20px; border-radius: 12px; border: 1px solid #e3e3e3; }
        .temp-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }
        .temp-card { border: 2px solid #eee; border-radius: 8px; padding: 15px; text-align: center; cursor: pointer; }
        .temp-card.active { border-color: var(--shopify-green); background: #f1f8f5; }
        label { display: block; font-size: 0.7rem; font-weight: 700; margin: 15px 0 5px; text-transform: uppercase; }
        .inp, .select { width: 100%; padding: 12px; border: 1px solid #babec3; border-radius: 6px; box-sizing: border-box; }
        .save-btn { background: var(--shopify-green); color: white; border: none; padding: 10px 20px; border-radius: 5px; font-weight: 700; }
    </style>
</head>
<body>

    <div class="header">
        <b><i class="fas fa-paint-brush"></i> DESIGN STUDIO</b>
        <button class="save-btn" id="publishBtn">PUBLISH DESIGN</button>
    </div>

    <div class="panel">
        <div style="font-weight:800; margin-bottom:15px;"><i class="fas fa-magic"></i> Default Store Themes</div>
        <div class="temp-grid">
            <div class="temp-card" onclick="applyTemplate('modern')"><i class="fas fa-moon"></i><br>Modern Dark</div>
            <div class="temp-card" onclick="applyTemplate('classic')"><i class="fas fa-sun"></i><br>Classic White</div>
        </div>
    </div>

    <div class="panel">
        <div style="font-weight:800; margin-bottom:15px;">Visual Settings</div>
        <label>Primary Color</label>
        <input type="color" id="pColor" class="inp">
        
        <label>Font Family</label>
        <select id="fFamily" class="select">
            <option value="'Inter', sans-serif">Modern</option>
            <option value="'Playfair Display', serif">Luxury</option>
        </select>

        <label>Button Style</label>
        <select id="bStyle" class="select">
            <option value="50px">Rounded</option>
            <option value="0px">Square</option>
        </select>

        <label>Dark Mode</label>
        <select id="darkMode" class="select">
            <option value="light">Off</option>
            <option value="dark">On</option>
        </select>

        <label>Announcement Bar</label>
        <input type="text" id="annText" class="inp" placeholder="Free Shipping...">

        <label>Banner URL</label>
        <input type="text" id="sBanner" class="inp" placeholder="https://...">
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        const firebaseConfig = { /* Aapka Config */ };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        const templates = {
            modern: { pColor: "#000000", fFamily: "'Inter', sans-serif", bStyle: "50px", darkMode: "dark", annText: "NEW SEASON LIVE" },
            classic: { pColor: "#008060", fFamily: "'Playfair Display', serif", bStyle: "5px", darkMode: "light", annText: "WELCOME TO OUR STORE" }
        };

        window.applyTemplate = (t) => {
            const d = templates[t];
            document.getElementById('pColor').value = d.pColor;
            document.getElementById('fFamily').value = d.fFamily;
            document.getElementById('bStyle').value = d.bStyle;
            document.getElementById('darkMode').value = d.darkMode;
            document.getElementById('annText').value = d.annText;
            alert(t.toUpperCase() + " applied! You can still customize it below.");
        };

        document.getElementById('publishBtn').onclick = async () => {
            const user = auth.currentUser;
            if(!user) return;
            await setDoc(doc(db, "store_designs", user.uid), {
                pColor: document.getElementById('pColor').value,
                fFamily: document.getElementById('fFamily').value,
                bStyle: document.getElementById('bStyle').value,
                darkMode: document.getElementById('darkMode').value,
                annText: document.getElementById('annText').value,
                sBanner: document.getElementById('sBanner').value
            });
            alert("Design Published!");
        };
    </script>
</body>
</html>
