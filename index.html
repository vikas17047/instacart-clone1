<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INSTACART - Seller Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background-color: #f0f2f5; padding: 20px; }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #2ecc71; margin-bottom: 20px; font-size: 24px; font-weight: 800; }
        
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 600; color: #333; }
        input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; outline: none; }
        
        .btn-add { width: 100%; padding: 12px; background: #2ecc71; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-add:hover { background: #27ae60; }

        .product-list { margin-top: 30px; }
        .product-card { background: #fff; border: 1px solid #eee; padding: 15px; border-radius: 10px; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; position: relative; }
        .product-card img { width: 60px; height: 60px; object-fit: cover; border-radius: 8px; background: #f9f9f9; }
        .product-info h4 { font-size: 16px; color: #333; }
        .product-info p { color: #2ecc71; font-weight: bold; margin-top: 2px; }
        
        .delete-btn { position: absolute; right: 15px; color: #ff4757; cursor: pointer; font-size: 18px; }
    </style>
</head>
<body>

<div class="container">
    <h2>INSTACART</h2>
    
    <div class="form-group">
        <label>Product Name</label>
        <input type="text" id="pName" placeholder="e.g. Fresh Tomatoes">
    </div>
    <div class="form-group">
        <label>Price (₹)</label>
        <input type="number" id="pPrice" placeholder="e.g. 40">
    </div>
    <div class="form-group">
        <label>Image URL</label>
        <input type="text" id="pImg" placeholder="Paste image link here">
    </div>
    <button class="btn-add" onclick="addProduct()">Add Product</button>

    <div class="product-list" id="productList">
        <h3 style="margin-bottom: 15px; font-size: 18px; border-bottom: 2px solid #f0f2f5; padding-bottom: 5px;">My Products</h3>
        </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCqh5b-p5dsiU6AtkWRbyD0rSUD62Izqeg",
        authDomain: "instacart-clone-91062.firebaseapp.com",
        projectId: "instacart-clone-91062",
        storageBucket: "instacart-clone-91062.firebasestorage.app",
        messagingSenderId: "232217818928",
        appId: "1:232217818928:web:e05efedfda36263f6cfaf5"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Add Product Function
    window.addProduct = async () => {
        const name = document.getElementById('pName').value;
        const price = document.getElementById('pPrice').value;
        const image = document.getElementById('pImg').value;

        if(!name || !price) return alert("Please fill details");

        try {
            await addDoc(collection(db, "products"), {
                name: name,
                price: price,
                image: image || "https://via.placeholder.com/150"
            });
            location.reload();
        } catch (e) { alert("Error adding product"); }
    }

    // Load Products Function
    async function loadProducts() {
        const list = document.getElementById('productList');
        const querySnapshot = await getDocs(collection(db, "products"));
        
        querySnapshot.forEach((product) => {
            const data = product.data();
            list.innerHTML += `
                <div class="product-card">
                    <img src="${data.image}">
                    <div class="product-info">
                        <h4>${data.name}</h4>
                        <p>₹${data.price}</p>
                    </div>
                    <i class="fas fa-trash delete-btn" onclick="deleteProduct('${product.id}')"></i>
                </div>
            `;
        });
    }

    window.deleteProduct = async (id) => {
        if(confirm("Delete this product?")) {
            await deleteDoc(doc(db, "products", id));
            location.reload();
        }
    }

    loadProducts();
</script>

</body>
</html>
